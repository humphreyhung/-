@{
    Layout = "_Layout";
    ViewData["Title"] = "Give4Life";
}

<!-- 左專案列表 -->
<section class="content">
    <aside class="sidebar">
        <h2>捐款專案列表</h2>
        <ul>
            <li><a href="#">唐氏症孩子計畫</a></li>
            <li><a href="#">癌症旅程計畫</a></li>
            <li><a href="#">自閉症關懷計畫</a></li>
            <li><a href="#">流浪動物救援</a></li>
            <li><a href="#">罕見疾病</a></li>
            <li><a href="#">脊髓損傷／癱瘓</a></li>
            <li><a href="#">ALS(漸凍人症)</a></li>
            <li><a href="#">肺部疾病</a></li>
        </ul>
    </aside>

    <section class="main-projects">
        <!-- 右上導覽列 -->
        <nav>
            <button>關於我們</button>
            <button>合作團體</button>
            <button>合作商家</button>
            <input type="text" placeholder="搜尋">
            <select>
                <option>全部分類</option>
                <option>孩童</option>
                <option>年長者</option>
                <option>先天性疾病</option>
            </select>
            <span class="see">👁 瀏覽人次: 1,235</span>
        </nav>

        <!-- 右下募款區塊 -->
        <main>
            <a class="project-link"
               asp-area=""
               asp-controller="Home"
               asp-action="Project">
                <section class="project"> 
                <img src="~/images/pic1.png" alt="唐氏症孩子">
                <h2>讓愛，從蛋捲開始－支持唐氏症孩子的未來</h2>
                <progress value="550000" max="1000000"></progress>
                <p>已募金額:550,000 / 目標金額:1,000,000</p>
                <p>🎁 捐獻數量:55盒  👥 捐獻人數:50人</p>
                </section>
            </a>

            <a href="#" class="project-link">
                <section class="project">
                    <img src="~/images/pic2.png" alt="癌症孩童">
                    <h2>讓愛酥進心裡，用餅乾陪他們走過抗癌旅程</h2>
                    <progress value="230000" max="1000000"></progress>
                    <p>已募金額:230,000 / 目標金額:1,000,000</p>
                    <p>🎁 捐獻數量:23盒  👥 捐獻人數:15人</p>
                </section>
            </a>

            <a href="#" class="project-link">
                <section class="project">
                    <img src="~/images/pic1.png" alt="唐氏症孩子">
                    <h2>讓愛，從蛋捲開始－支持唐氏症孩子的未來</h2>
                    <progress value="550000" max="1000000"></progress>
                    <p>已募金額:550,000 / 目標金額:1,000,000</p>
                    <p>🎁 捐獻數量:55盒  👥 捐獻人數:50人</p>
                </section>
            </a>

            <a href="#" class="project-link">
                <section class="project">
                    <img src="~/images/pic2.png" alt="癌症孩童">
                    <h2>讓愛酥進心裡，用餅乾陪他們走過抗癌旅程</h2>
                    <progress value="230000" max="1000000"></progress>
                    <p>已募金額:230,000 / 目標金額:1,000,000</p>
                    <p>🎁 捐獻數量:23盒  👥 捐獻人數:15人</p>
                </section>
            </a>
        </main>

        <!-- 頁尾 -->
        <footer>
            <div class="footer-row">
                <p>網頁設計：萬實華第五組</p>
                <p>電話:02-55326788</p>
                <p class="social">
                    追蹤我們：
                    <a href="#">Facebook</a>
                    <a href="#">Instagram</a>
                </p>
            </div>
        </footer>
    </section>
</section>

@section Styles {
    <style>
        body {
            font-family: "微軟正黑體", sans-serif;
            background-color: #f7f7f0;
            margin: 0;
            padding: 0;
        }

        .sit-title {
            font-size: 15px;
            color: rgb(74, 72, 72);
            text-align: left;
            margin-left: 0;
            padding-left: 0;
        }

        /* 左專案列表 */
        .sidebar {
            width: 250px;
            background-color: #f0f5e9;
            padding: 30px;
            border-radius: 10px;
            height: fit-content;
            box-shadow: 0 0 5px rgba(0,0,0,0.1);
        }

        .sidebar h2 {
            font-size: 15px;
            margin-bottom: 10px;
        }

        .sidebar ul {
            list-style: none;
            font-size: 13px;
            padding: 0;
        }

        .sidebar li {
            margin-bottom: 10px;
        }

        .sidebar a {
            text-decoration: none;
            color: #2a6b2a;
        }

        .sidebar a:hover {
            text-decoration: underline;
        }

        .content {
            display: flex;
            padding: 20px;
            gap: 20px;
        }

        /* 右上列 */
        nav {
            display: flex;
            flex-wrap: wrap;
            background-color: #eae9dc;
            border-radius: 10px;
            padding: 10px;
            gap: 10px;
        }

        /* 右下內容 */
        main {
            display: flex;
            gap: 30px;
            padding: 20px;
            justify-content: center;
            flex-wrap: wrap; /*多行換行 */
            padding: 20px;
        }

        .project {
            background-color: #ffffff;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 0 5px rgba(0,0,0,0.1);
            padding-top: 20px;
            width: 350px;
        }

        .project h2{
            font-size: 20px;
        }

        .project p{
            font-size: 15px;
        }

            /* 進度條 */
            .project progress {
                width: 100%;
                height: 18px;
            }

        progress::-webkit-progress-bar {
            background-color: #ffffff;
            border-radius: 10px;
        }

        progress::-webkit-progress-value {
            background-color: #547a54;
            border-radius: 10px;
        }

        /* 區塊點選 */
        .project-link {
            text-decoration: none;
            color: inherit; /*保留原色*/
            display: block; /*整區都可以點擊*/
        }

            .project-link:hover {
                opacity: 0.6; /*加深強調*/
            }

        /* 專案圖片 */
        .project img {
            width: 100%;
            border-radius: 8px;
        }

        /* 底下公告欄 */
        footer {
            width: 100%;
            background-color: #a8bfa0;
            padding: 10px;
            text-align: left;
        }

        .footer-row {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .social {
            text-align: right;
        }
    </style>
    <script>
        //導覽列按鈕模擬
        document.querySelectorAll('nav button').forEach(btn => {
            btn.addEventListener('click', () => {
                alert(`你點擊了「${btn.textContent}」`);
            });
        });

        //搜尋功能
        document.querySelector('nav input[type="text"]').addEventListener('input', (e) => {
            const keyword = e.target.value.trim().toLowerCase();
            const projects = document.querySelectorAll('.project');

            projects.forEach(project => {
                const title = project.querySelector('h2').textContent.toLowerCase();
                project.parentElement.style.display = title.includes(keyword) ? 'block' : 'none';
            });
        });

        // 4. 顯示 progress 條百分比（依金額）
        document.querySelectorAll('.project').forEach(project => {
            const progressBar = project.querySelector('progress');

            // 擷取金額文字，例如 "已募金額:550,000 / 目標金額:1,000,000"
            const moneyText = project.querySelectorAll('p')[0].textContent;

            // 擷取金額數值
            const match = moneyText.match(/已募金額:(\d[\d,]*) \/ 目標金額:(\d[\d,]*)/);
            if (match) {
                const currentAmount = parseInt(match[1].replace(/,/g, ''));
                const goalAmount = parseInt(match[2].replace(/,/g, ''));

                // 計算百分比並設定進度條
                const percentage = Math.min((currentAmount / goalAmount) * 100, 100);
                progressBar.value = currentAmount;
                progressBar.max = goalAmount;

                // 顯示百分比文字
                const percentageText = document.createElement('p');
                percentageText.style.fontWeight = 'bold';
                percentageText.textContent = `達成率：${Math.round(percentage)}%`;
                project.insertBefore(percentageText, progressBar.nextSibling);
            }
        });


        //瀏覽人次模擬自動增加
        let viewCountSpan = document.querySelector('.see');
        let baseNumber = parseInt(viewCountSpan.textContent.replace(/[^\d]/g, ''));

        function updateViewCount() {
            baseNumber += Math.floor(Math.random() * 3); // 每次加 0~2
            viewCountSpan.textContent = `👁 瀏覽人次: ${baseNumber.toLocaleString()}`;
        }
        //每 2 秒更新一次
        setInterval(updateViewCount, 2000);

    </script>
} 